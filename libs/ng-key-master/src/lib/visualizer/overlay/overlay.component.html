<!-- NEW -->
<!--@if (overlayService.isOpen()) {-->

<!--  <div class="flex bg-yellow-500">-->

<!--  @for (group of overlayService.activeKeyBindings() | keyvalue : groupsSort ; track group) {-->
<!--    <div class="grid grid-rows-{{gridConfig.maxRows}} grid-flow-col gap-2">-->
<!--      <p class="col-start-1 col-span-{{group.value.length}}">{{group.key}}</p>-->
<!--      @for(keybinding of group.value; track keybinding) {-->
<!--        <div>{{ keybinding.label }}</div>-->
<!--      }-->
<!--      @for(keybinding of group.value; track keybinding) {-->
<!--        <div>{{ keybinding.label }}</div>-->
<!--      }-->
<!--      @for(keybinding of group.value; track keybinding) {-->
<!--        <div>{{ keybinding.label }}</div>-->
<!--      }-->


<!--      <p class="row-start-1 col-span-3">{{group.key}}</p>-->
<!--      @for(keybinding of group.value; track keybinding) {-->
<!--        <div>{{ keybinding.label }}</div>-->
<!--      }-->

<!--    </div>-->
<!--  }-->

<!--  </div>-->

<!--  <div class="grid">-->
<!--    &lt;!&ndash; Grid Header / Container Name &ndash;&gt;-->
<!--    <div *ngFor="let group of overlayService.activeKeyBindings() | keyvalue : groupsSort ; trackBy: trackByKey" class="test-group">-->
<!--      <p>{{ group.key }}</p>-->
<!--      <ul>-->
<!--        <li *ngFor="let keybinding of group.value">{{ keybinding.label }}</li>-->
<!--      </ul>-->
<!--    </div>-->
<!--  </div>-->
<!--}-->


<!-- Overlay-Container -->
<div *ngIf="overlayService.isOpen()"
     @zoom
     class="flex gap-8 shadow-lg bg-neutral-800/80 p-6 rounded-xl backdrop-blur-md text-white">

  <ng-container *ngIf="overlayService.activeKeyBindings() as groups">

    <ng-container *ngFor="let group of groups | keyvalue : groupsSort ; trackBy: trackByKey">

      <!-- Action/KeyBinding Group -->
      <div *ngIf="group.value.length > 0"
           class="flex flex-col min-w-[250px] whitespace-nowrap text-ellipsis overflow-hidden">

        <!-- Group-Name -->
        <p @fade
           class="font-bold text-xl mb-1"
           data-test="group-name">
          {{ group.key }}
        </p>

        <!-- KeyBindings List -->
        <ul class="divide-y rounded-full divide-neutral-500">
          <li *ngFor="let keyBinding of group.value; trackBy: trackByElement"
              @fade
              class="flex justify-between items-center gap-4 px-1 py-3 font-light">

            <span class="text-ellipsis overflow-hidden whitespace-nowrap text-neutral-300">
              {{ keyBinding.label }}
            </span>

            <span class="whitespace-nowrap bg-neutral-500 font-mono rounded px-2 py-1">
              {{ keyBinding.key | symbolizeKey }}
            </span>

          </li>
        </ul>

      </div>

    </ng-container>

    <!-- Placeholder -->

    <ng-container *ngIf="isEmpty(groups)">
      <p @fade
         class="font-light italic text-neutral-300"
         data-test="empty-message">
        No key-bindings
      </p>
    </ng-container>

  </ng-container>

  <!-- PAGINATOR -->

  <div class="absolute bottom-2 left-0 w-full flex gap-1 justify-center">
    @for (page of totalPages | numberIterator; track page) {
      <div class="rounded-full h-2 w-2 bg-neutral-500" [ngClass]="{'!bg-neutral-300': page === currentPage}"></div>
    }
  </div>

</div>
